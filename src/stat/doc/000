Wikidot.com
[site-name           ].wikidot.com
Share on twitter Facebook Delicious Digg Reddit Reddit
Edit History Tags Source
Explore »
 

Code Wiki

Help for the forgetful programmer

[Search this sit][Search]
  • home page
  • languages
  • concepts
  • about code snippets
  • about code wiki

Create account or Sign in

Welcome

  • Home Page
  • What is Code Wiki?
  • What is a Snippet?
  • Recent changes
  • List all pages

Code Wiki

  • Browse Languages
  • Browse Concepts

Languages

  • Excel Homework
  • C
  • Shell Scripting
  • VBScript

Links

  • Academic Writing
  • Stack Overflow
  • Do My Project

stat (C System Call)

stat is a system call that is used to determine information about a file based
on its file path.

Required Include Files

#include <unistd.h>
#include <sys/stat.h>
#include <sys/types.h>

Function Definition

int stat(const char *path, struct stat *buf);

  Field                               Description
const
char      The file descriptor of the file that is being inquired.
*path
struct    A structure where data about the file will be stored. A detailed
stat *buf look at all of the fields in this structure can be found in the
          struct stat page.
return    Returns a negative value on failure.
value

Code Snippet

An example of code that uses the stat() system call is below.

#include <unistd.h>
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>

int main(int argc, char **argv)
{
    if(argc != 2)
        return 1;

    struct stat fileStat;
    if(stat(argv[1],&fileStat) < 0)
        return 1;

    printf("Information for %s\n",argv[1]);
    printf("---------------------------\n");
    printf("File Size: \t\t%d bytes\n",fileStat.st_size);
    printf("Number of Links: \t%d\n",fileStat.st_nlink);
    printf("File inode: \t\t%d\n",fileStat.st_ino);

    printf("File Permissions: \t");
    printf( (S_ISDIR(fileStat.st_mode)) ? "d" : "-");
    printf( (fileStat.st_mode & S_IRUSR) ? "r" : "-");
    printf( (fileStat.st_mode & S_IWUSR) ? "w" : "-");
    printf( (fileStat.st_mode & S_IXUSR) ? "x" : "-");
    printf( (fileStat.st_mode & S_IRGRP) ? "r" : "-");
    printf( (fileStat.st_mode & S_IWGRP) ? "w" : "-");
    printf( (fileStat.st_mode & S_IXGRP) ? "x" : "-");
    printf( (fileStat.st_mode & S_IROTH) ? "r" : "-");
    printf( (fileStat.st_mode & S_IWOTH) ? "w" : "-");
    printf( (fileStat.st_mode & S_IXOTH) ? "x" : "-");
    printf("\n\n");

    printf("The file %s a symbolic link\n", (S_ISLNK(fileStat.st_mode)) ? "is" : "is not");

    return 0;
}

The output of this program is shown in the following set of commands:


Information on the current files in the directory:

$ ls -l
total 16
-rwxr-xr-x 1 stargazer stargazer   36 2008-05-06 20:50 testfile.sh
-rwxr-xr-x 1 stargazer stargazer 7780 2008-05-07 12:36 testProgram
-rw-r--r-- 1 stargazer stargazer 1229 2008-05-07 12:04 testProgram.c

Running the program with the file testfile.sh

$ ./testProgram testfile.sh

Information for testfile.sh
---------------------------
File Size:              36 bytes
Number of Links:        1
File inode:             180055
File Permissions:       -rwxr-xr-x

The file is not a symbolic link

Running the program with the files testProgram.c

$ ./testProgram testProgram.c

Information for testProgram.c
---------------------------
File Size:              1229 bytes
Number of Links:        1
File inode:             295487
File Permissions:       -rw-r--r--

The file is not a symbolic link

Running the program with the directory /home/stargazer

$ ./testProgram /home/stargazer

Information for /home/stargazer
---------------------------
File Size:              4096 bytes
Number of Links:        61
File inode:             32706
File Permissions:       drwxr-xr-x

The file is not a symbolic link

cfile-handlingsystem-calls
page revision: 7, last edited: 19 Sep 2018 06:27
Edit Tags History Files Print Site tools + Options
Edit Sections Append Edit Meta Watchers Backlinks Page Source Parent Lock Page
Rename Delete
Help  | Terms of Service  | Privacy  | Report a bug  | Flag as objectionable
Powered by Wikidot.com
Unless otherwise stated, the content of this page is licensed under Creative
Commons Attribution-ShareAlike 3.0 License

Other interesting sites

[80]

Metrix Create:Space

[80]

Igor

Independent Generation of Research
[80]

The Compendium of Knowledge

Fiction creates reality.
[80]

NauticoAmager

Quantcast
Click here to edit contents of this page.
Click here to toggle editing of individual sections of the page (if possible).
Watch headings for an "edit" link when available.
Append content without editing the whole page source.
Check out how this page has evolved in the past.
If you want to discuss contents of this page - this is the easiest way to do
it.
View and manage file attachments for this page.
A few useful tools to manage this Site.
See pages that link to and include this page.
Change the name (also URL address, possibly the category) of the page.
View wiki source for this page without editing.
View/set parent page (used for creating breadcrumbs and structured layout).
Notify administrators if there is objectionable content in this page.
Something does not work as expected? Find out what you can do.
General Wikidot.com documentation and help section.
Wikidot.com Terms of Service - what you can, what you should not etc.
Wikidot.com Privacy Policy.
